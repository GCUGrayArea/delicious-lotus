# ===================================
# AI Video Generation Pipeline
# Local Development Environment Variables
# ===================================
#
# SETUP INSTRUCTIONS:
# 1. Copy this file to .env: cp .env.example .env
# 2. Update values as needed for your local environment
# 3. NEVER commit .env file to git (it's in .gitignore)
#
# ===================================

# -----------------------------------
# Database Configuration (PostgreSQL)
# -----------------------------------
POSTGRES_DB=ai_video_pipeline
POSTGRES_USER=ai_video_user
POSTGRES_PASSWORD=dev_password_change_me
POSTGRES_PORT=5432

# Database URL (used by backend)
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://ai_video_user:dev_password_change_me@postgres:5432/ai_video_pipeline

# -----------------------------------
# Redis Configuration
# -----------------------------------
REDIS_PORT=6379
REDIS_URL=redis://redis:6379/0

# -----------------------------------
# Backend API Configuration
# -----------------------------------
BACKEND_PORT=8000
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=info

# CORS - Allowed origins for frontend (comma-separated)
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000

# -----------------------------------
# AI Services Configuration
# -----------------------------------
# Replicate API Token
# Get your token from: https://replicate.com/account/api-tokens
REPLICATE_API_TOKEN=your_replicate_token_here

# -----------------------------------
# AWS Configuration (for S3 storage)
# -----------------------------------
# AWS credentials (leave empty for local development without S3)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1

# S3 Bucket for video/asset storage
# Backend also accepts S3_BUCKET_NAME (preferred); falls back to S3_BUCKET for compatibility
S3_BUCKET_NAME=ai-video-dev-bucket
S3_BUCKET=ai-video-dev-bucket

# Local storage fallback (when AWS credentials not provided)
USE_LOCAL_STORAGE=true
LOCAL_STORAGE_PATH=/app/storage

# -----------------------------------
# Video Processing Configuration
# -----------------------------------
# FFmpeg settings
FFMPEG_THREADS=4
MAX_VIDEO_DURATION=180  # 3 minutes max
OUTPUT_VIDEO_QUALITY=720p
OUTPUT_VIDEO_CODEC=h264
OUTPUT_AUDIO_CODEC=aac
OUTPUT_AUDIO_BITRATE=128k

# -----------------------------------
# Job Processing Configuration
# -----------------------------------
# Celery settings
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/0
CELERY_TASK_ALWAYS_EAGER=false  # Set to true for synchronous testing

# Job limits
MAX_CONCURRENT_JOBS=5
JOB_TIMEOUT_SECONDS=1200  # 20 minutes
CLEANUP_COMPLETED_JOBS_AFTER_DAYS=7

# -----------------------------------
# Performance & Optimization
# -----------------------------------
# Cache settings
ENABLE_CACHING=true
CACHE_TTL_SECONDS=3600  # 1 hour

# Rate limiting
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# -----------------------------------
# Security Settings
# -----------------------------------
# Session secret (generate a random string for production)
SECRET_KEY=dev_secret_key_change_me_in_production

# File upload limits
MAX_UPLOAD_SIZE_MB=100
ALLOWED_UPLOAD_EXTENSIONS=.mp3,.wav,.jpg,.jpeg,.png,.gif

# -----------------------------------
# Monitoring & Logging (Optional for local dev)
# -----------------------------------
# Sentry DSN (leave empty for local development)
SENTRY_DSN=

# Log format
LOG_FORMAT=json  # Options: json, text

# -----------------------------------
# Feature Flags (for phased rollout)
# -----------------------------------
# MVP features
ENABLE_AD_PIPELINE=true
ENABLE_MUSIC_VIDEO_PIPELINE=false  # Set to true after MVP

# Experimental features
ENABLE_TIMELINE_EDITOR=false
ENABLE_ADVANCED_TRANSITIONS=false
ENABLE_CUSTOM_FONTS=false

# -----------------------------------
# Development Tools
# -----------------------------------
# Enable hot reload
HOT_RELOAD=true

# Enable API documentation
ENABLE_DOCS=true
DOCS_URL=/docs
REDOC_URL=/redoc

# -----------------------------------
# Cost Optimization Settings
# -----------------------------------
# Use cheaper models during development
USE_CHEAP_MODELS=true
MODEL_QUALITY_TIER=standard  # Options: economy, standard, premium

# Smart caching for API calls
CACHE_AI_RESPONSES=true
REUSE_SIMILAR_PROMPTS=true

# -----------------------------------
# Frontend Configuration (if served by backend)
# -----------------------------------
# Path to frontend build output
FRONTEND_BUILD_PATH=/app/frontend/dist

# Serve frontend from backend
SERVE_FRONTEND=true
